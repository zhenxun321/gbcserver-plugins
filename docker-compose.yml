version: "3.8"

services:
  gbcserver:
    build: .
    container_name: gbcserver
    restart: unless-stopped
    ports:
      - "8080:8080"   # Web HTTP
      - "8443:8443"   # Web HTTPS（可选：需要挂载证书）
      - "8094:8094"   # 插件交互端口
    environment:
      # 端口（避免占用 80/443 以及 root 权限问题）
      PORTS_HTTP: "8080"
      PORTS_HTTPS: "8443"
      PORTS_PLUGIN: "8094"

      # 配置与数据目录
      CONFIG_PATH: "/app/config.json"
      DATA_DIR: "/data"

      # （可选）如果你想仅通过环境变量配置，也可以不挂载 config.json
      # SERVER_TOKEN: "..."

    volumes:
      - ./data:/data
      - ./config.json:/app/config.json:ro
      # TLS 证书（可选）
      # - ./tls:/tls:ro
